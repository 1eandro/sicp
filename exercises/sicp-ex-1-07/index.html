<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en-us" lang="en-us">
<head>
  <link href="https://gmpg.org/xfn/11" rel="profile">
  <meta http-equiv="content-type" content="text/html; charset=utf-8">
  <meta name="generator" content="Hugo 0.80.0" />

  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">

  <title>Exercise 1.07 &middot; Ben&#39;s Solutions to Sicp</title>
  <meta name="description" content="" />

  
  <link type="text/css" rel="stylesheet" href="https://benjamin-philip.github.io/sicp/css/print.css" media="print">
  <link type="text/css" rel="stylesheet" href="https://benjamin-philip.github.io/sicp/css/poole.css">
  <link type="text/css" rel="stylesheet" href="https://benjamin-philip.github.io/sicp/css/syntax.css">
  <link type="text/css" rel="stylesheet" href="https://benjamin-philip.github.io/sicp/css/hyde.css">
    <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Abril+Fatface|PT+Sans:400,400i,700">


  
  <link rel="apple-touch-icon-precomposed" sizes="144x144" href="/apple-touch-icon-144-precomposed.png">
  <link rel="shortcut icon" href="/favicon.png">

  
  <meta name="google-site-verification" content="nheXvk7OS-14YJaq680OFiPOAynr2WDWiWisRvE25ao" />
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.13.11/dist/katex.min.css" integrity="sha384-Um5gpz1odJg5Z4HAmzPtgZKdTBHZdw8S29IecapCSB31ligYPhHQZMIlWLYQGVoc" crossorigin="anonymous">
<script defer src="https://cdn.jsdelivr.net/npm/katex@0.13.11/dist/katex.min.js" integrity="sha384-YNHdsYkH6gMx9y3mRkmcJ2mFUjTd0qNQQvY9VYZgQd7DcN7env35GzlmFaZ23JGp" crossorigin="anonymous"></script>
<script defer src="https://cdn.jsdelivr.net/npm/katex@0.13.11/dist/contrib/auto-render.min.js" integrity="sha384-vZTG03m+2yp6N6BNi5iM4rW4oIwk5DfcNdFfxkk9ZWpDriOkXX8voJBFrAO7MpVl" crossorigin="anonymous"></script>
<script>
 document.addEventListener("DOMContentLoaded", function() {
     renderMathInElement(document.body, {
         
         
         delimiters: [
             {left: '$$', right: '$$', display: true},
             {left: '$', right: '$', display: false},
             {left: '\\(', right: '\\)', display: false},
             {left: '\\[', right: '\\]', display: true}
         ],
         
         throwOnError : false
     });
 });
</script>


</head>

  <body class=" ">
  <aside class="sidebar">
  <div class="container sidebar-sticky">
    <div class="sidebar-about">
      <a href="https://benjamin-philip.github.io/sicp/"><h1>Ben&#39;s Solutions to Sicp</h1></a>
      <p class="lead">
       My journey reading Sicp: From learning scheme to building an interpreter. 
      </p>
    </div>

    <nav>
      <ul class="sidebar-nav">
        <li><a href="https://benjamin-philip.github.io/sicp/">Home</a> </li>
        
      </ul>
    </nav>

    <p>&copy; 2021. All rights reserved. </p>
  </div>
</aside>

      <main class="content container">
          <div class="post">
  <h1>Exercise 1.07</h1>
  <time datetime=2020-10-22T00:00:00Z class="post-date">Thu, Oct 22, 2020</time>
  <p>In Ex 1.7, we redefine the <code>good-enough?</code> test from
the [Newton&rsquo;s Square roots] (<a href="https://benjamin-philip.github.io/sicp/example-newtons-square-root">https://benjamin-philip.github.io/sicp/example-newtons-square-root</a>)
example inorder to make
it compatible will small numbers and very large numbers.</p>
<h1 id="the-question">The Question</h1>
<p><strong>Exercise 1.07:</strong> <code>The good-enough?</code> test used in computing square
roots will not be very effective for finding the square roots of very
small numbers. Also, in real computers, arithmetic operations are
almost always performed with limited precision. This makes our
test inadequate for very large numbers. Explain these statements,
with examples showing how the test fails for small and large numbers.
An alternative strategy for implementing <code>good-enough?</code> is to watch
how <code>guess</code> changes from one iteration to the next and to
stop when the change is a very small fraction of the guess. Design
a square-root procedure that uses this kind of end test. Does this
work better for small and large numbers?</p>
<h1 id="my-thoughts">My thoughts</h1>
<p>This exercise is an attempt to fix the problems we faced in <a href="https://benjamin-philip.github.io/sicp/example-newtons-square-root">Newton&rsquo;s square roots example</a>
We found that the <code>good-enough?</code> test was pathetic at returning
accurate results (i.e in the level of accuracy given) for small
numbers and in the case of larger numbers, just took too long.</p>
<h2 id="an-alternative-strategy">An alternative strategy</h2>
<p>If you read the latter parts of the question, you notice that
another way of testing if our guess is good enough? is to
stop when the changes are very minute i.e, The changes are
only a certain fraction of the guess. This helps as the number
of iterations for smaller numbers increases (which increases accuracy)
and the iterations for larger numbers decreases (which decreases accuracy
as we don&rsquo;t need such precision for larger numbers.)</p>
<p>If we re-write this in simple language this would be:</p>
<p>Divide <code>guess</code> by the difference of it and it&rsquo;s improvement
and check if it  it is lesser than a given amount.</p>
<h2 id="rewrite-good-enough">Rewrite good-enough?</h2>
<p>We can now copy our square-roots file (<code>cp path/to/file /path/to/new-file</code>)
and change <code>good-enough?</code>. We shall take the &ldquo;given number&rdquo; as 0.0001.</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-scheme" data-lang="scheme">(<span style="color:#66d9ef">define </span>(<span style="color:#a6e22e">good-enough?</span> guess x)
  (&lt; (/ (- (<span style="color:#a6e22e">improve-guess</span> guess x) guess) guess) <span style="color:#ae81ff">0.0001</span>))
</code></pre></div><p>This gives us the script:</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-scheme" data-lang="scheme">(<span style="color:#66d9ef">define </span>(<span style="color:#a6e22e">average</span> x y)
  (/ (+ x y) <span style="color:#ae81ff">2</span>)) <span style="color:#75715e">;; divide the sum of x and y by 2</span>


(<span style="color:#66d9ef">define </span>(<span style="color:#a6e22e">improve-guess</span> guess x)
  (<span style="color:#a6e22e">average</span> guess (/ x guess)))<span style="color:#75715e">;; return the average of guess and guess divided by x</span>

(<span style="color:#66d9ef">define </span>(<span style="color:#a6e22e">square</span> x)
  (* x x))<span style="color:#75715e">;; returns the square of a numeral</span>


(<span style="color:#66d9ef">define </span>(<span style="color:#a6e22e">good-enough?</span> guess x)
  (&lt; (/ (- (<span style="color:#a6e22e">improve-guess</span> guess x) guess) guess) <span style="color:#ae81ff">0.0001</span>))


(<span style="color:#66d9ef">define </span>(<span style="color:#a6e22e">sqrt-iter</span> guess x)
  (<span style="color:#66d9ef">if </span>(<span style="color:#a6e22e">good-enough?</span> guess x)
      guess
      (<span style="color:#a6e22e">sqrt-iter</span> (<span style="color:#a6e22e">improve-guess</span> guess x)
                 x)))
  <span style="color:#75715e">;; if our guess is good enough, return it,</span>
  <span style="color:#75715e">;;else call (sqrt-iter) with an improved guess</span>


(<span style="color:#66d9ef">define </span>(<span style="color:#a6e22e">square-root</span> x)
  (<span style="color:#a6e22e">sqrt-iter</span> <span style="color:#ae81ff">1.0</span> x)) <span style="color:#75715e">;; Call sqrt-iter with the guess of 1</span>

</code></pre></div><p>Now let us run it and see how it works:</p>
<pre><code>1 ]=&gt; (square-root 4)

;Value: 2.5
</code></pre><p>Now 2.5 is obviously wrong. The problem is the moment the guess, is greater than
or equal to the real square root, <code>(/ (- (improve-guess guess x) guess) guess)</code>
returns a negative number, In the case where <code>guess = 2.5 , x = 4</code>,
I got `-.1800000000000000000008 as the answer.</p>
<p>Trying <code>(/ (- guess (improve-guess guess x)) guess)</code> was quite the opposite:
I was getting negative numbers for numbers lesser than the square root. However,</p>
<h2 id="fixing-good-enough">Fixing good-enough?</h2>
<p>So how do you fix <code>good-enough?</code> one option is to compare the <strong>absolute value</strong>
of the division. So let&rsquo;s try that:</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-scheme" data-lang="scheme">(<span style="color:#66d9ef">define </span>(<span style="color:#a6e22e">good-enough?</span> guess x)
 (&lt; (abs (/ (- (<span style="color:#a6e22e">improve-guess</span> guess x) guess) guess) <span style="color:#ae81ff">0.0001</span>))
</code></pre></div><pre><code>1 ]=&gt; (square-root 256)

;Value: 16.00000352670594
</code></pre><p>Now that&rsquo;s what we want!</p>
<h1 id="the-answer">The Answer</h1>
<p>Yes. Yes it does..</p>

</div>


      </main>

      
      
<script type="application/javascript">
var doNotTrack = false;
if (!doNotTrack) {
	(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
	(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
	m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
	})(window,document,'script','https://www.google-analytics.com/analytics.js','ga');
	ga('create', 'G-8PFRPH4Y65', 'auto');
	
	ga('send', 'pageview');
}
</script>

      
  </body>
</html>
