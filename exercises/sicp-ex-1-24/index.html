<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en-us" lang="en-us">
<head>
  <link href="https://gmpg.org/xfn/11" rel="profile">
  <meta http-equiv="content-type" content="text/html; charset=utf-8">
  <meta name="generator" content="Hugo 0.80.0" />

  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">

  <title>Exercise 1.24 &middot; Ben&#39;s Solutions to Sicp</title>
  <meta name="description" content="" />

  
  <link type="text/css" rel="stylesheet" href="https://benjamin-philip.github.io/sicp/css/print.css" media="print">
  <link type="text/css" rel="stylesheet" href="https://benjamin-philip.github.io/sicp/css/poole.css">
  <link type="text/css" rel="stylesheet" href="https://benjamin-philip.github.io/sicp/css/syntax.css">
  <link type="text/css" rel="stylesheet" href="https://benjamin-philip.github.io/sicp/css/hyde.css">
    <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Abril+Fatface|PT+Sans:400,400i,700">


  
  <link rel="apple-touch-icon-precomposed" sizes="144x144" href="/apple-touch-icon-144-precomposed.png">
  <link rel="shortcut icon" href="/favicon.png">

  
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.13.11/dist/katex.min.css" integrity="sha384-Um5gpz1odJg5Z4HAmzPtgZKdTBHZdw8S29IecapCSB31ligYPhHQZMIlWLYQGVoc" crossorigin="anonymous">
<script defer src="https://cdn.jsdelivr.net/npm/katex@0.13.11/dist/katex.min.js" integrity="sha384-YNHdsYkH6gMx9y3mRkmcJ2mFUjTd0qNQQvY9VYZgQd7DcN7env35GzlmFaZ23JGp" crossorigin="anonymous"></script>
<script defer src="https://cdn.jsdelivr.net/npm/katex@0.13.11/dist/contrib/auto-render.min.js" integrity="sha384-vZTG03m+2yp6N6BNi5iM4rW4oIwk5DfcNdFfxkk9ZWpDriOkXX8voJBFrAO7MpVl" crossorigin="anonymous"></script>
<script>
 document.addEventListener("DOMContentLoaded", function() {
     renderMathInElement(document.body, {
         
         
         delimiters: [
             {left: '$$', right: '$$', display: true},
             {left: '$', right: '$', display: false},
             {left: '\\(', right: '\\)', display: false},
             {left: '\\[', right: '\\]', display: true}
         ],
         
         throwOnError : false
     });
 });
</script>


</head>

  <body class=" ">
  <aside class="sidebar">
  <div class="container sidebar-sticky">
    <div class="sidebar-about">
      <a href="https://benjamin-philip.github.io/sicp/"><h1>Ben&#39;s Solutions to Sicp</h1></a>
      <p class="lead">
       My journey reading Sicp: From learning scheme to building an interpreter. 
      </p>
    </div>

    <nav>
      <ul class="sidebar-nav">
        <li><a href="https://benjamin-philip.github.io/sicp/">Home</a> </li>
        
      </ul>
    </nav>

    <p>&copy; 2021. All rights reserved. </p>
  </div>
</aside>

      <main class="content container">
          <div class="post">
  <h1>Exercise 1.24</h1>
  <time datetime=2020-12-01T00:00:00Z class="post-date">Tue, Dec 1, 2020</time>
  <p>This is the 24th question from Sicp. And yet again, I feel this is a
really easy question.</p>
<h1 id="the-question">The Question</h1>
<p><strong>Exercise 1.24:</strong> Modify the <code>timed-prime-test</code> procedure of Exercise
1.22 to use <code>fast-prime?</code>(the Fermat method), and the test each of the
12 primes you found in that exercise. Since the Fermat test has
$\theta(\log n)$ growth, how would you expect the time to test primes
near 1,000,000 to compare with the time needed to test primes near
1000? Do your data bear this out? Can you explain any discrepancy you
find?</p>
<h1 id="my-thoughts">My thoughts</h1>
<p>This is yet another easy question. I think the current objective is to
teach us how to write scheme code, not how to think like a
programmer. Oh, well. I suppose we&rsquo;ll get to that soon.</p>
<h1 id="the-answer">The Answer</h1>
<p>I have split the answer into 2 parts:</p>
<h2 id="the-procedure">The Procedure</h2>
<p>We need to make the <code>timed-prime-test</code> use the Fermat test instead of
our homebrewed test. This is quite simple. What we have to do is
define <code>fast-prime?</code> and modify <code>timed-prime-test</code> . Let&rsquo;s do that :</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-scheme" data-lang="scheme">(<span style="color:#66d9ef">define </span>(<span style="color:#a6e22e">expmod</span> base exp m)
  (<span style="color:#66d9ef">cond </span>((= exp <span style="color:#ae81ff">0</span>) <span style="color:#ae81ff">1</span>)
	((even? exp)
	 (remainder (<span style="color:#a6e22e">square</span> (<span style="color:#a6e22e">expmod</span> base (/ exp <span style="color:#ae81ff">2</span>) m))
		    m))
	(<span style="color:#a6e22e">else</span>
	 (remainder (* base (<span style="color:#a6e22e">expmod</span> base (- exp <span style="color:#ae81ff">1</span>) m))
		    m))))

(<span style="color:#66d9ef">define </span>(<span style="color:#a6e22e">fermat-test</span> n)
  (<span style="color:#66d9ef">define </span>(<span style="color:#a6e22e">try-it</span> a)
    (= (<span style="color:#a6e22e">expmod</span> a n n) a))
  (<span style="color:#a6e22e">try-it</span> (+ <span style="color:#ae81ff">1</span> (<span style="color:#a6e22e">random</span> (- n <span style="color:#ae81ff">1</span>)))))

(<span style="color:#66d9ef">define </span>(<span style="color:#a6e22e">fast-prime?</span> n times)
  (<span style="color:#66d9ef">cond </span>((= times <span style="color:#ae81ff">0</span>) true-)
	((<span style="color:#a6e22e">fermat-test</span> n) (<span style="color:#a6e22e">fast-prime?</span> n (- times <span style="color:#ae81ff">1</span>)))
	(<span style="color:#66d9ef">else </span>false)))

(<span style="color:#66d9ef">define </span>(<span style="color:#a6e22e">timed-prime-test</span> n)
  (<span style="color:#a6e22e">newline</span>)
  (display n)
  (<span style="color:#a6e22e">start-prime-test</span> n (<span style="color:#a6e22e">runtime</span>)))

(<span style="color:#66d9ef">define </span>(<span style="color:#a6e22e">start-prime-test</span> n start-time)
  (<span style="color:#66d9ef">if </span>(<span style="color:#a6e22e">fast-prime?</span> n <span style="color:#ae81ff">3</span>)
      (<span style="color:#a6e22e">report-prime</span> (- (<span style="color:#a6e22e">runtime</span>) start-time))))

(<span style="color:#66d9ef">define </span>(<span style="color:#a6e22e">report-prime</span> elapsed-time)
  (display <span style="color:#e6db74">&#34; *** &#34;</span>)
  (display elapsed-time))

</code></pre></div><h2 id="testing">Testing</h2>
<p>Let us try using it now. Since, it is log n, the time taken should be
approximately equal for every prime. I also modified
<code>search-for-primes</code> from the previous exercise.</p>
<p>Here are the results:</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-scheme" data-lang="scheme">(<span style="color:#a6e22e">search-for-primes</span> <span style="color:#ae81ff">100</span> <span style="color:#ae81ff">3</span>)

<span style="color:#ae81ff">101</span> *** <span style="color:#ae81ff">0</span><span style="color:#f92672">.</span>
<span style="color:#ae81ff">103</span> *** <span style="color:#ae81ff">0</span><span style="color:#f92672">.</span>
<span style="color:#ae81ff">107</span> *** <span style="color:#ae81ff">0</span><span style="color:#f92672">.</span>
<span style="color:#75715e">;Unspecified return value</span>

<span style="color:#ae81ff">1</span> (<span style="color:#a6e22e">user</span>) <span style="color:#66d9ef">=&gt; </span>(<span style="color:#a6e22e">search-for-primes</span> <span style="color:#ae81ff">1000000000000</span> <span style="color:#ae81ff">3</span>)

<span style="color:#ae81ff">1000000000039</span> *** <span style="color:#ae81ff">0</span><span style="color:#f92672">.</span>
<span style="color:#ae81ff">1000000000061</span> *** <span style="color:#ae81ff">0</span><span style="color:#f92672">.</span>
<span style="color:#ae81ff">1000000000063</span> *** <span style="color:#ae81ff">0</span><span style="color:#f92672">.</span>
<span style="color:#75715e">;Unspecified return value</span>

<span style="color:#ae81ff">1</span> (<span style="color:#a6e22e">user</span>) <span style="color:#66d9ef">=&gt; </span>(<span style="color:#a6e22e">search-for-primes</span> <span style="color:#ae81ff">1000000000000000000000000</span> <span style="color:#ae81ff">3</span>)

<span style="color:#ae81ff">1000000000000000000000007</span> *** <span style="color:#ae81ff">0</span><span style="color:#f92672">.</span>
<span style="color:#ae81ff">1000000000000000000000049</span> *** <span style="color:#ae81ff">0</span><span style="color:#f92672">.</span>
<span style="color:#ae81ff">1000000000000000000000121</span> *** <span style="color:#ae81ff">0</span><span style="color:#f92672">.</span>
<span style="color:#75715e">;Unspecified return value</span>
</code></pre></div><p>Quite clearly the fermat test works.</p>

</div>


      </main>

      
      
      
  </body>
</html>
