<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en-us" lang="en-us">
<head>
  <link href="https://gmpg.org/xfn/11" rel="profile">
  <meta http-equiv="content-type" content="text/html; charset=utf-8">
  <meta name="generator" content="Hugo 0.80.0" />

  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">

  <title>Exercise 1.23 &middot; Ben&#39;s Solutions to Sicp</title>
  <meta name="description" content="" />

  
  <link type="text/css" rel="stylesheet" href="https://benjamin-philip.github.io/sicp/css/print.css" media="print">
  <link type="text/css" rel="stylesheet" href="https://benjamin-philip.github.io/sicp/css/poole.css">
  <link type="text/css" rel="stylesheet" href="https://benjamin-philip.github.io/sicp/css/syntax.css">
  <link type="text/css" rel="stylesheet" href="https://benjamin-philip.github.io/sicp/css/hyde.css">
    <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Abril+Fatface|PT+Sans:400,400i,700">


  
  <link rel="apple-touch-icon-precomposed" sizes="144x144" href="/apple-touch-icon-144-precomposed.png">
  <link rel="shortcut icon" href="/favicon.png">

  
  <meta name="google-site-verification" content="nheXvk7OS-14YJaq680OFiPOAynr2WDWiWisRvE25ao" />
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.13.11/dist/katex.min.css" integrity="sha384-Um5gpz1odJg5Z4HAmzPtgZKdTBHZdw8S29IecapCSB31ligYPhHQZMIlWLYQGVoc" crossorigin="anonymous">
<script defer src="https://cdn.jsdelivr.net/npm/katex@0.13.11/dist/katex.min.js" integrity="sha384-YNHdsYkH6gMx9y3mRkmcJ2mFUjTd0qNQQvY9VYZgQd7DcN7env35GzlmFaZ23JGp" crossorigin="anonymous"></script>
<script defer src="https://cdn.jsdelivr.net/npm/katex@0.13.11/dist/contrib/auto-render.min.js" integrity="sha384-vZTG03m+2yp6N6BNi5iM4rW4oIwk5DfcNdFfxkk9ZWpDriOkXX8voJBFrAO7MpVl" crossorigin="anonymous"></script>
<script>
 document.addEventListener("DOMContentLoaded", function() {
     renderMathInElement(document.body, {
         
         
         delimiters: [
             {left: '$$', right: '$$', display: true},
             {left: '$', right: '$', display: false},
             {left: '\\(', right: '\\)', display: false},
             {left: '\\[', right: '\\]', display: true}
         ],
         
         throwOnError : false
     });
 });
</script>


</head>

  <body class=" ">
  <aside class="sidebar">
  <div class="container sidebar-sticky">
    <div class="sidebar-about">
      <a href="https://benjamin-philip.github.io/sicp/"><h1>Ben&#39;s Solutions to Sicp</h1></a>
      <p class="lead">
       My journey reading Sicp: From learning scheme to building an interpreter. 
      </p>
    </div>

    <nav>
      <ul class="sidebar-nav">
        <li><a href="https://benjamin-philip.github.io/sicp/">Home</a> </li>
        
      </ul>
    </nav>

    <p>&copy; 2021. All rights reserved. </p>
  </div>
</aside>

      <main class="content container">
          <div class="post">
  <h1>Exercise 1.23</h1>
  <time datetime=2020-11-30T00:00:00Z class="post-date">Mon, Nov 30, 2020</time>
  <p>This is the 23rd exercise from Sicp.</p>
<h1 id="the-question">The Question</h1>
<p><strong>Exercise 1.23:</strong> The smallest-divisor procedure shown at the
start of this section does lots of needless testing: After it checks to
see if the number is divisible by 2 there is no point in checking to
see if it is divisible by any larger even numbers. This suggests that
the values used for <code>test-divisor</code> should not be 2, 3, 4, 5, 6, . . . ,
but rather 2, 3, 5, 7, 9, . . . . To implement this change, define a pro-
cedure next that returns 3 if its input is equal to 2 and otherwise
returns its input plus 2. Modify the smallest-divisor procedure
to use (next test-divisor) instead of (+ test-divisor 1) .
With timed-prime-test incorporating this modified version of
smallest-divisor , run the test for each of the 12 primes found
in Exercise 1.22. Since this modification halves the number of
test steps, you should expect it to run about twice as fast. Is this
expectation confirmed? If not, what is the observed ratio of the
speeds of the two algorithms, and how do you explain the fact that
it is different from 2?</p>
<h1 id="my-thoughts">My thoughts</h1>
<p>The question is simple. Write a procedure <code>next</code> that returns
<code>3</code>  if <code>input</code> is 2 and <code>input + 2</code> if odd. We then need to modify
<code>find-divisor</code> to use this change.</p>
<p>After all that, we need to check if this makes any diffrence.</p>
<h1 id="the-answer">The Answer</h1>
<p>This question is very simple. So I am not going to spend all my time
explaining it.</p>
<h2 id="next"><code>next</code></h2>
<p>This is the definition of <code>next</code>:</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-scheme" data-lang="scheme">(<span style="color:#66d9ef">define </span>(<span style="color:#a6e22e">next</span> input)
  (<span style="color:#66d9ef">if </span>(= input <span style="color:#ae81ff">2</span>)
      <span style="color:#ae81ff">3</span>
      (+ input <span style="color:#ae81ff">2</span>)))
</code></pre></div><h2 id="smallest-divisor"><code>smallest-divisor</code></h2>
<p>This is what smallest-divisor looks like:</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-scheme" data-lang="scheme">
(<span style="color:#66d9ef">define </span>(<span style="color:#a6e22e">smallest-divisor</span> n)
  (<span style="color:#a6e22e">find-divisor</span> n <span style="color:#ae81ff">2</span>))

(<span style="color:#66d9ef">define </span>(<span style="color:#a6e22e">find-divisor</span> n test-divisor)
  (<span style="color:#66d9ef">cond </span>((&gt; (<span style="color:#a6e22e">square</span> test-divisor) n) n)
	((<span style="color:#a6e22e">divides?</span> test-divisor n) test-divisor)
	(<span style="color:#66d9ef">else </span>(<span style="color:#a6e22e">find-divisor</span> n (<span style="color:#a6e22e">next</span> test-divisor)))))

(<span style="color:#66d9ef">define </span>(<span style="color:#a6e22e">divides?</span> a b)
  (= (remainder b a) <span style="color:#ae81ff">0</span>))
</code></pre></div><p>What I have done is added a test checking if <code>test-divisor</code> is even
and if it is also not equal to 2. If it is, use <code>next</code>.</p>
<p>I also changed the increment value in <code>find-divisor</code> to 2.</p>
<h2 id="checking-if-this-makes-any-diffrence">Checking if this makes any diffrence</h2>
<p>Now, we check for a diffrence. Let&rsquo;s use the code from the previous
exercise and modify <code>smallest-divisor</code> and <code>test-divisor</code>.</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-scheme" data-lang="scheme">(<span style="color:#66d9ef">define </span>(<span style="color:#a6e22e">next</span> input)
  (<span style="color:#66d9ef">if </span>(= input <span style="color:#ae81ff">2</span>)
      <span style="color:#ae81ff">3</span>
      (+ input <span style="color:#ae81ff">2</span>)))

(<span style="color:#66d9ef">define </span>(<span style="color:#a6e22e">prime?</span> n)
  (= n (<span style="color:#a6e22e">smallest-divisor</span> n)))

(<span style="color:#66d9ef">define </span>(<span style="color:#a6e22e">smallest-divisor</span> n)
  (<span style="color:#a6e22e">find-divisor</span> n <span style="color:#ae81ff">2</span>))

(<span style="color:#66d9ef">define </span>(<span style="color:#a6e22e">find-divisor</span> n test-divisor)
  (<span style="color:#66d9ef">cond </span>((&gt; (<span style="color:#a6e22e">square</span> test-divisor) n) n)
	((<span style="color:#a6e22e">divides?</span> test-divisor n) test-divisor)
	(<span style="color:#66d9ef">else </span>(<span style="color:#a6e22e">find-divisor</span> n (<span style="color:#a6e22e">next</span> test-divisor)))))

(<span style="color:#66d9ef">define </span>(<span style="color:#a6e22e">divides?</span> a b)
  (= (remainder b a) <span style="color:#ae81ff">0</span>))
  
(<span style="color:#66d9ef">define </span>(<span style="color:#a6e22e">timed-prime-test</span> n)
  (<span style="color:#a6e22e">newline</span>)
  (display n)
  (<span style="color:#a6e22e">start-prime-test</span> n (<span style="color:#a6e22e">runtime</span>)))
(<span style="color:#66d9ef">define </span>(<span style="color:#a6e22e">start-prime-test</span> n start-time)
  (<span style="color:#66d9ef">if </span>(<span style="color:#a6e22e">prime?</span> n)
      (<span style="color:#a6e22e">report-prime</span> (- (<span style="color:#a6e22e">runtime</span>) start-time))))
(<span style="color:#66d9ef">define </span>(<span style="color:#a6e22e">report-prime</span> elapsed-time)
  (display <span style="color:#e6db74">&#34; *** &#34;</span>)
  (display elapsed-time))

(<span style="color:#66d9ef">define </span>(<span style="color:#a6e22e">prime-range</span> cur-val count req)
  (<span style="color:#66d9ef">cond </span>((not (= count req))
	  (<span style="color:#66d9ef">if </span>(<span style="color:#a6e22e">prime?</span> cur-val)
	      (<span style="color:#66d9ef">and </span>(<span style="color:#a6e22e">timed-prime-test</span> cur-val)
	       (<span style="color:#a6e22e">prime-range</span> (+ cur-val <span style="color:#ae81ff">2</span>)(+ count <span style="color:#ae81ff">1</span>) req))
	      (<span style="color:#a6e22e">prime-range</span> (+ cur-val <span style="color:#ae81ff">2</span>) count  req)))))

	  
(<span style="color:#66d9ef">define </span>(<span style="color:#a6e22e">search-for-primes</span> range no-of-primes)
  (<span style="color:#a6e22e">prime-range</span> (<span style="color:#66d9ef">if </span>(even? range)(- range <span style="color:#ae81ff">1</span>) range) <span style="color:#ae81ff">0</span> no-of-primes))
</code></pre></div><p>Now, let&rsquo;s test it :</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-scheme" data-lang="scheme">(<span style="color:#a6e22e">search-for-primes</span> <span style="color:#ae81ff">100000000000</span> <span style="color:#ae81ff">3</span>)

<span style="color:#ae81ff">100000000003</span> *** <span style="color:#f92672">.</span><span style="color:#ae81ff">15999999999999992</span>
<span style="color:#ae81ff">100000000019</span> *** <span style="color:#f92672">.</span><span style="color:#ae81ff">15999999999999992</span>
<span style="color:#ae81ff">100000000057</span> *** <span style="color:#f92672">.</span><span style="color:#ae81ff">1599999999999997</span>
<span style="color:#75715e">;Unspecified return value</span>

</code></pre></div><p>Huge Diffrence ! What was 0.27 became 0.16 ! 0.27 divided by 0.16 is
1.6875. While, this is not 2, It is 1.7</p>
<h1 id="answering-sicps-questions">Answering Sicp&rsquo;s Questions</h1>
<p>No, the expectation is not confirmed. The observed ratio 0.25:0.16. This
can be written as 25:16</p>
<h2 id="how-do-i-explain-this-">How do I explain this ?</h2>
<p>I think this .04 difference can be attributed to <code>next</code>. We have a lot
more tests and evaluations happening because of, it. However, in my
opinion being 1.6 times faster is a big thing.</p>

</div>


      </main>

      
      
<script type="application/javascript">
var doNotTrack = false;
if (!doNotTrack) {
	(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
	(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
	m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
	})(window,document,'script','https://www.google-analytics.com/analytics.js','ga');
	ga('create', 'G-8PFRPH4Y65', 'auto');
	
	ga('send', 'pageview');
}
</script>

      
  </body>
</html>
