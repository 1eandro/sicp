<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en-us" lang="en-us">
<head>
  <link href="https://gmpg.org/xfn/11" rel="profile">
  <meta http-equiv="content-type" content="text/html; charset=utf-8">
  <meta name="generator" content="Hugo 0.80.0" />

  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">

  <title>Exercise 1.36 &middot; Ben&#39;s Solutions to Sicp</title>
  <meta name="description" content="" />

  
  <link type="text/css" rel="stylesheet" href="https://benjamin-philip.github.io/sicp/css/print.css" media="print">
  <link type="text/css" rel="stylesheet" href="https://benjamin-philip.github.io/sicp/css/poole.css">
  <link type="text/css" rel="stylesheet" href="https://benjamin-philip.github.io/sicp/css/syntax.css">
  <link type="text/css" rel="stylesheet" href="https://benjamin-philip.github.io/sicp/css/hyde.css">
    <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Abril+Fatface|PT+Sans:400,400i,700">


  
  <link rel="apple-touch-icon-precomposed" sizes="144x144" href="/apple-touch-icon-144-precomposed.png">
  <link rel="shortcut icon" href="/favicon.png">

  
  <meta name="google-site-verification" content="nheXvk7OS-14YJaq680OFiPOAynr2WDWiWisRvE25ao" />
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.13.11/dist/katex.min.css" integrity="sha384-Um5gpz1odJg5Z4HAmzPtgZKdTBHZdw8S29IecapCSB31ligYPhHQZMIlWLYQGVoc" crossorigin="anonymous">
<script defer src="https://cdn.jsdelivr.net/npm/katex@0.13.11/dist/katex.min.js" integrity="sha384-YNHdsYkH6gMx9y3mRkmcJ2mFUjTd0qNQQvY9VYZgQd7DcN7env35GzlmFaZ23JGp" crossorigin="anonymous"></script>
<script defer src="https://cdn.jsdelivr.net/npm/katex@0.13.11/dist/contrib/auto-render.min.js" integrity="sha384-vZTG03m+2yp6N6BNi5iM4rW4oIwk5DfcNdFfxkk9ZWpDriOkXX8voJBFrAO7MpVl" crossorigin="anonymous"></script>
<script>
 document.addEventListener("DOMContentLoaded", function() {
     renderMathInElement(document.body, {
         
         
         delimiters: [
             {left: '$$', right: '$$', display: true},
             {left: '$', right: '$', display: false},
             {left: '\\(', right: '\\)', display: false},
             {left: '\\[', right: '\\]', display: true}
         ],
         
         throwOnError : false
     });
 });
</script>


</head>

  <body class=" ">
  <aside class="sidebar">
  <div class="container sidebar-sticky">
    <div class="sidebar-about">
      <a href="https://benjamin-philip.github.io/sicp/"><h1>Ben&#39;s Solutions to Sicp</h1></a>
      <p class="lead">
       My journey reading Sicp: From learning scheme to building an interpreter. 
      </p>
    </div>

    <nav>
      <ul class="sidebar-nav">
        <li><a href="https://benjamin-philip.github.io/sicp/">Home</a> </li>
        
      </ul>
    </nav>

    <p>&copy; 2021. All rights reserved. </p>
  </div>
</aside>

      <main class="content container">
          <div class="post">
  <h1>Exercise 1.36</h1>
  <time datetime=2021-02-02T00:00:00Z class="post-date">Tue, Feb 2, 2021</time>
  <p>This is the $36^{th}$ Exercise from Sicp. Here we modify <code>fixed-point</code> so that
it prints each guess. We then find a solution to $x^{x} = 1000$.</p>
<h1 id="the-question">The Question</h1>
<p><strong>Exercise 1.36:</strong> Modify <code>fixed-point</code> so that it print the sequence of
approximations it generates, using the <code>newline</code> and <code>display</code> primitives shown
in Exercise 1.22. Then find a solution to $x^{x} = 1000$ by finding a fixed
point of $x \mapsto \log(1000)/\log(x)$. (Use scheme&rsquo;s primitive <code>log</code>procedure,
which computes natural logarithms.) Compare the number of steps this takes with
and without average damping. (Note that you cannot start <code>fixed-point</code> with a
guess of 1, as this would cause division by log(1) = 0)</p>
<h1 id="notes">Notes</h1>
<p>I am dividing this answer to 2 parts:</p>
<ol>
<li>Modifying <code>fixed-point</code> so that it prints the guesses</li>
<li>Finding $x^{x} = 1000$ and comparing the number of steps with and without average damping.</li>
</ol>
<h1 id="part-1">Part 1</h1>
<p>Here we are writing a version of <code>fixed-point</code> that prints each guess.</p>
<h2 id="printing">Printing</h2>
<p>First, let us define a procedure <code>print</code> that displays its input and then prints
a newline.</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-scheme" data-lang="scheme">(<span style="color:#66d9ef">define </span>(<span style="color:#a6e22e">print</span> x)
  ((display x)
   (<span style="color:#a6e22e">newline</span>)))
</code></pre></div><p>testing:</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-scheme" data-lang="scheme">(<span style="color:#a6e22e">print</span> <span style="color:#ae81ff">23</span>)

<span style="color:#ae81ff">23</span>
<span style="color:#75715e">;The object #!unspecific is not applicable.</span>
<span style="color:#75715e">;To continue, call RESTART with an option number:</span>
<span style="color:#75715e">; (RESTART 2) =&gt; Specify a procedure to use in its place.</span>
<span style="color:#75715e">; (RESTART 1) =&gt; Return to read-eval-print level 1.</span>

</code></pre></div><p>It&rsquo;s not good practice to have functions that do not return values. That&rsquo;s
possibly why the interpreter is complaining. Let us return <code>x</code> after printing.</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-scheme" data-lang="scheme">(<span style="color:#66d9ef">define </span>(<span style="color:#a6e22e">print</span> x)
  (display x)
  (<span style="color:#a6e22e">newline</span>)
  x)
</code></pre></div><p>Testing again :</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-scheme" data-lang="scheme">(<span style="color:#a6e22e">print</span> <span style="color:#ae81ff">23</span>)
<span style="color:#ae81ff">23</span>
<span style="color:#75715e">;Value: 23</span>
</code></pre></div><h2 id="finding-the-guess-number">Finding the guess number</h2>
<p>Printing the guess number would be meaningless if we couldn&rsquo;t find which guess
it was - whether the first, the second or tenth.</p>
<p>Hence, we will define a variable called <code>depth</code>. We access this variable using
lexical scoping. Every recursion, we increment <code>depth</code> by 1.</p>
<p>Let us define a function <code>report-guess</code> to print all the information.</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-scheme" data-lang="scheme">(<span style="color:#66d9ef">define </span>(<span style="color:#a6e22e">report-guess</span> guess)
  (display depth)
  (display <span style="color:#e6db74">&#34; *** &#34;</span>)
  (<span style="color:#a6e22e">print</span> guess))
</code></pre></div><h2 id="implementing-fixed-point-to-use-report-guess">Implementing <code>fixed-point</code> to use <code>report-guess</code></h2>
<p>This this <code>fixed-point</code>:</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-scheme" data-lang="scheme">(<span style="color:#66d9ef">define </span>(<span style="color:#a6e22e">fixed-point</span> f first-guess)
  (<span style="color:#66d9ef">define </span>(<span style="color:#a6e22e">close-enough?</span> v1 v2)
    (&lt; (abs (- v1 v2))
       tolerance))
  (<span style="color:#66d9ef">define </span>(<span style="color:#a6e22e">try</span> guess)
    (<span style="color:#66d9ef">let </span>((<span style="color:#a6e22e">next</span> (<span style="color:#a6e22e">f</span> guess)))
      (<span style="color:#66d9ef">if </span>(<span style="color:#a6e22e">close-enough?</span> guess next)
          next
          (<span style="color:#a6e22e">try</span> next))))
  (<span style="color:#a6e22e">try</span> first-guess))
</code></pre></div><p>We need <code>try</code> to have a parameter called <code>depth</code>. We then could have a <code>let</code>
statement like the following:</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-scheme" data-lang="scheme">(<span style="color:#66d9ef">let </span>((<span style="color:#a6e22e">next</span> (<span style="color:#a6e22e">f</span> (<span style="color:#a6e22e">report-guess</span> guess))))
</code></pre></div><p>Thus, we report the guess whenever the <code>let</code> statement is evaluated.</p>
<p>This is the redefined <code>fixed-point</code>:</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-scheme" data-lang="scheme">(<span style="color:#66d9ef">define </span>(<span style="color:#a6e22e">print</span> x)
  (display x)
  (<span style="color:#a6e22e">newline</span>)
  x)

(<span style="color:#66d9ef">define </span>tolerance <span style="color:#ae81ff">0.00001</span>)

(<span style="color:#66d9ef">define </span>(<span style="color:#a6e22e">fixed-point</span> f first-guess)
  (<span style="color:#66d9ef">define </span>(<span style="color:#a6e22e">close-enough?</span> v1 v2)
    (&lt; (abs (- v1 v2))
       tolerance))
  (<span style="color:#66d9ef">define </span>(<span style="color:#a6e22e">try</span> guess depth)
    (<span style="color:#66d9ef">define </span>(<span style="color:#a6e22e">report-guess</span> guess)
      (display depth)
      (display <span style="color:#e6db74">&#34; *** &#34;</span>)
      (<span style="color:#a6e22e">print</span> guess))
    (<span style="color:#66d9ef">let </span>((<span style="color:#a6e22e">next</span> (<span style="color:#a6e22e">f</span> (<span style="color:#a6e22e">report-guess</span> guess))))
      (<span style="color:#66d9ef">if </span>(<span style="color:#a6e22e">close-enough?</span> guess next)
          next
          (<span style="color:#a6e22e">try</span> next (<span style="color:#a6e22e">inc</span> depth)))))
  (<span style="color:#a6e22e">try</span> first-guess <span style="color:#ae81ff">1</span>))
</code></pre></div><h2 id="testing-fixed-point">Testing <code>fixed-point</code></h2>
<p>Now that we have got an implementation of <code>fixed-point</code>, let us test it.</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-scheme" data-lang="scheme">(<span style="color:#a6e22e">fixed-point</span> cos <span style="color:#ae81ff">1.0</span>)
<span style="color:#ae81ff">1</span> *** <span style="color:#ae81ff">1</span><span style="color:#f92672">.</span>
<span style="color:#ae81ff">2</span> *** <span style="color:#f92672">.</span><span style="color:#ae81ff">5403023058681398</span>
<span style="color:#ae81ff">3</span> *** <span style="color:#f92672">.</span><span style="color:#ae81ff">8575532158463934</span>
<span style="color:#ae81ff">4</span> *** <span style="color:#f92672">.</span><span style="color:#ae81ff">6542897904977791</span>
<span style="color:#ae81ff">5</span> *** <span style="color:#f92672">.</span><span style="color:#ae81ff">7934803587425656</span>
<span style="color:#ae81ff">6</span> *** <span style="color:#f92672">.</span><span style="color:#ae81ff">7013687736227565</span>
<span style="color:#ae81ff">7</span> *** <span style="color:#f92672">.</span><span style="color:#ae81ff">7639596829006542</span>
<span style="color:#ae81ff">8</span> *** <span style="color:#f92672">.</span><span style="color:#ae81ff">7221024250267077</span>
<span style="color:#ae81ff">9</span> *** <span style="color:#f92672">.</span><span style="color:#ae81ff">7504177617637605</span>
<span style="color:#ae81ff">10</span> *** <span style="color:#f92672">.</span><span style="color:#ae81ff">7314040424225098</span>
<span style="color:#ae81ff">11</span> *** <span style="color:#f92672">.</span><span style="color:#ae81ff">7442373549005569</span>
<span style="color:#ae81ff">12</span> *** <span style="color:#f92672">.</span><span style="color:#ae81ff">7356047404363474</span>
<span style="color:#ae81ff">13</span> *** <span style="color:#f92672">.</span><span style="color:#ae81ff">7414250866101092</span>
<span style="color:#ae81ff">14</span> *** <span style="color:#f92672">.</span><span style="color:#ae81ff">7375068905132428</span>
<span style="color:#ae81ff">15</span> *** <span style="color:#f92672">.</span><span style="color:#ae81ff">7401473355678757</span>
<span style="color:#ae81ff">16</span> *** <span style="color:#f92672">.</span><span style="color:#ae81ff">7383692041223232</span>
<span style="color:#ae81ff">17</span> *** <span style="color:#f92672">.</span><span style="color:#ae81ff">7395672022122561</span>
<span style="color:#ae81ff">18</span> *** <span style="color:#f92672">.</span><span style="color:#ae81ff">7387603198742113</span>
<span style="color:#ae81ff">19</span> *** <span style="color:#f92672">.</span><span style="color:#ae81ff">7393038923969059</span>
<span style="color:#ae81ff">20</span> *** <span style="color:#f92672">.</span><span style="color:#ae81ff">7389377567153445</span>
<span style="color:#ae81ff">21</span> *** <span style="color:#f92672">.</span><span style="color:#ae81ff">7391843997714936</span>
<span style="color:#ae81ff">22</span> *** <span style="color:#f92672">.</span><span style="color:#ae81ff">7390182624274122</span>
<span style="color:#ae81ff">23</span> *** <span style="color:#f92672">.</span><span style="color:#ae81ff">7391301765296711</span>
<span style="color:#ae81ff">24</span> *** <span style="color:#f92672">.</span><span style="color:#ae81ff">7390547907469174</span>
<span style="color:#ae81ff">25</span> *** <span style="color:#f92672">.</span><span style="color:#ae81ff">7391055719265363</span>
<span style="color:#ae81ff">26</span> *** <span style="color:#f92672">.</span><span style="color:#ae81ff">7390713652989449</span>
<span style="color:#ae81ff">27</span> *** <span style="color:#f92672">.</span><span style="color:#ae81ff">7390944073790913</span>
<span style="color:#ae81ff">28</span> *** <span style="color:#f92672">.</span><span style="color:#ae81ff">739078885994992</span>
<span style="color:#ae81ff">29</span> *** <span style="color:#f92672">.</span><span style="color:#ae81ff">7390893414033927</span>
<span style="color:#75715e">;Value: .7390822985224024</span>
</code></pre></div><p>Unfortunately, the last guess is omitted, though I don&rsquo;t understand why.
Probably due to some internal mechanics by which <code>let</code> works.</p>
<h1 id="part-2">Part 2</h1>
<p>Here we find <code>x</code>, where $x^{x} = 1000$.</p>
<p>The authors have themselves derived that we could find x by find the fixed point
of the function $x \mapsto \log(1000)/\log(x)$</p>
<p>This would be the following <code>lambda</code>:</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-scheme" data-lang="scheme">(<span style="color:#66d9ef">lambda </span>(<span style="color:#a6e22e">x</span>)(/ (log <span style="color:#ae81ff">1000</span>)(log x)))
</code></pre></div><h2 id="without-average-damping">Without average damping</h2>
<p>Let us use our <code>fixed-point</code> function to compute this.</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-scheme" data-lang="scheme">(<span style="color:#a6e22e">fixed-point</span> (<span style="color:#66d9ef">lambda </span>(<span style="color:#a6e22e">x</span>)(/ (log <span style="color:#ae81ff">1000</span>)(log x))) <span style="color:#ae81ff">2</span>)
<span style="color:#ae81ff">1</span> *** <span style="color:#ae81ff">2</span>
<span style="color:#ae81ff">2</span> *** <span style="color:#ae81ff">9.965784284662087</span>
<span style="color:#ae81ff">3</span> *** <span style="color:#ae81ff">3.004472209841214</span>
<span style="color:#ae81ff">4</span> *** <span style="color:#ae81ff">6.279195757507157</span>
<span style="color:#ae81ff">5</span> *** <span style="color:#ae81ff">3.759850702401539</span>
<span style="color:#ae81ff">6</span> *** <span style="color:#ae81ff">5.215843784925895</span>
<span style="color:#ae81ff">7</span> *** <span style="color:#ae81ff">4.182207192401397</span>
<span style="color:#ae81ff">8</span> *** <span style="color:#ae81ff">4.8277650983445906</span>
<span style="color:#ae81ff">9</span> *** <span style="color:#ae81ff">4.387593384662677</span>
<span style="color:#ae81ff">10</span> *** <span style="color:#ae81ff">4.671250085763899</span>
<span style="color:#ae81ff">11</span> *** <span style="color:#ae81ff">4.481403616895052</span>
<span style="color:#ae81ff">12</span> *** <span style="color:#ae81ff">4.6053657460929</span>
<span style="color:#ae81ff">13</span> *** <span style="color:#ae81ff">4.5230849678718865</span>
<span style="color:#ae81ff">14</span> *** <span style="color:#ae81ff">4.577114682047341</span>
<span style="color:#ae81ff">15</span> *** <span style="color:#ae81ff">4.541382480151454</span>
<span style="color:#ae81ff">16</span> *** <span style="color:#ae81ff">4.564903245230833</span>
<span style="color:#ae81ff">17</span> *** <span style="color:#ae81ff">4.549372679303342</span>
<span style="color:#ae81ff">18</span> *** <span style="color:#ae81ff">4.559606491913287</span>
<span style="color:#ae81ff">19</span> *** <span style="color:#ae81ff">4.552853875788271</span>
<span style="color:#ae81ff">20</span> *** <span style="color:#ae81ff">4.557305529748263</span>
<span style="color:#ae81ff">21</span> *** <span style="color:#ae81ff">4.554369064436181</span>
<span style="color:#ae81ff">22</span> *** <span style="color:#ae81ff">4.556305311532999</span>
<span style="color:#ae81ff">23</span> *** <span style="color:#ae81ff">4.555028263573554</span>
<span style="color:#ae81ff">24</span> *** <span style="color:#ae81ff">4.555870396702851</span>
<span style="color:#ae81ff">25</span> *** <span style="color:#ae81ff">4.555315001192079</span>
<span style="color:#ae81ff">26</span> *** <span style="color:#ae81ff">4.5556812635433275</span>
<span style="color:#ae81ff">27</span> *** <span style="color:#ae81ff">4.555439715736846</span>
<span style="color:#ae81ff">28</span> *** <span style="color:#ae81ff">4.555599009998291</span>
<span style="color:#ae81ff">29</span> *** <span style="color:#ae81ff">4.555493957531389</span>
<span style="color:#ae81ff">30</span> *** <span style="color:#ae81ff">4.555563237292884</span>
<span style="color:#ae81ff">31</span> *** <span style="color:#ae81ff">4.555517548417651</span>
<span style="color:#ae81ff">32</span> *** <span style="color:#ae81ff">4.555547679306398</span>
<span style="color:#ae81ff">33</span> *** <span style="color:#ae81ff">4.555527808516254</span>
<span style="color:#ae81ff">34</span> *** <span style="color:#ae81ff">4.555540912917957</span>
<span style="color:#75715e">;Value: 4.555532270803653</span>
</code></pre></div><p>Here it took us 35 steps to reach.
Now let us try with average damping</p>
<h2 id="with-average-damping">With average damping</h2>
<p>We now need to develop a version with average damping.
With average damping, we average our guess by the value returned by the
function.</p>
<p>This would be the following lambda:</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-scheme" data-lang="scheme">(<span style="color:#66d9ef">lambda </span>(<span style="color:#a6e22e">x</span>)(<span style="color:#a6e22e">average</span> x (/ (log <span style="color:#ae81ff">1000</span>)(log x))))
</code></pre></div><p>Now let&rsquo;s try it :</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-scheme" data-lang="scheme">(<span style="color:#66d9ef">define </span>(<span style="color:#a6e22e">average</span> x y)(/ (+ x y) <span style="color:#ae81ff">2</span>))

<span style="color:#75715e">;Value: average</span>

<span style="color:#ae81ff">1</span> (<span style="color:#a6e22e">user</span>) <span style="color:#66d9ef">=&gt; </span>(<span style="color:#a6e22e">fixed-point</span> (<span style="color:#66d9ef">lambda </span>(<span style="color:#a6e22e">x</span>)(<span style="color:#a6e22e">average</span> x (/ (log <span style="color:#ae81ff">1000</span>)(log x)))) <span style="color:#ae81ff">2.0</span>)
<span style="color:#ae81ff">1</span> *** <span style="color:#ae81ff">2</span><span style="color:#f92672">.</span>
<span style="color:#ae81ff">2</span> *** <span style="color:#ae81ff">5.9828921423310435</span>
<span style="color:#ae81ff">3</span> *** <span style="color:#ae81ff">4.922168721308343</span>
<span style="color:#ae81ff">4</span> *** <span style="color:#ae81ff">4.628224318195455</span>
<span style="color:#ae81ff">5</span> *** <span style="color:#ae81ff">4.568346513136242</span>
<span style="color:#ae81ff">6</span> *** <span style="color:#ae81ff">4.5577305909237005</span>
<span style="color:#ae81ff">7</span> *** <span style="color:#ae81ff">4.555909809045131</span>
<span style="color:#ae81ff">8</span> *** <span style="color:#ae81ff">4.555599411610624</span>
<span style="color:#ae81ff">9</span> *** <span style="color:#ae81ff">4.5555465521473675</span>
<span style="color:#75715e">;Value: 4.555537551999825</span>
</code></pre></div><p>We computed something similar in just 10 steps ! That is 2/7 of the steps taken
with out average damping !</p>

</div>


      </main>

      
      
<script type="application/javascript">
var doNotTrack = false;
if (!doNotTrack) {
	(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
	(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
	m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
	})(window,document,'script','https://www.google-analytics.com/analytics.js','ga');
	ga('create', 'G-8PFRPH4Y65', 'auto');
	
	ga('send', 'pageview');
}
</script>

      
  </body>
</html>
